<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>T-Bank Demo</title>

    <script src="https://securepay.tinkoff.ru/html/payForm/js/tinkoff_v2.js"></script>
    <script src="/static/tbank-widget.js"></script>
</head>
<body>

<button onclick="startPay()">Оплатить</button>

<script>
    async function startPay() {
        const res = await fetch("/api/payments/init", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                orderId: "order_" + Date.now(),
                amount: 15000,
                description: "Тестовая оплата"
            })
        });

        const data = await res.json();

        TBank.pay({
            paymentId: data.PaymentID,
            mode: "popup" // или redirect
        });
    }
</script>

</body>
</html>
